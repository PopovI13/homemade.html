<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weather Widget</title>
  <style>
    body {
      background: #0d0d0d;
      color: white;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .weather-card {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 220px;
    }
    .weather-card h2 {
      margin: 0 0 10px;
    }
    .weather-card .temp {
      font-size: 2.5rem;
      margin: 10px 0;
    }
    .weather-card .desc {
      text-transform: capitalize;
    }
    .weather-card .extra {
      margin-top: 10px;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="weather-card" id="weather">
    <h2 id="location">--</h2>
    <div class="temp" id="temp">--°C</div>
    <div class="desc" id="desc">--</div>
    <div class="extra" id="extra"></div>
  </div>

  <script>
    const apiKey = 'YOUR_OPENWEATHERMAP_API_KEY';  // <-- replace this
    const weatherDiv = document.getElementById('weather');
    const locEl = document.getElementById('location');
    const tempEl = document.getElementById('temp');
    const descEl = document.getElementById('desc');
    const extraEl = document.getElementById('extra');

    function fetchWeather(lat, lon) {
      // Use OpenWeatherMap current weather API
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;
      fetch(url)
        .then(response => {
          if (!response.ok) throw new Error('Weather fetch failed');
          return response.json();
        })
        .then(data => {
          // console.log(data);
          const name = data.name;
          const temp = data.main.temp.toFixed(1);
          const desc = data.weather[0].description;
          const humidity = data.main.humidity;
          const wind = data.wind.speed;

          locEl.textContent = name;
          tempEl.textContent = `${temp}°C`;
          descEl.textContent = desc;
          extraEl.textContent = `Humidity: ${humidity}% | Wind: ${wind} m/s`;
        })
        .catch(err => {
          console.error('Error fetching weather:', err);
          locEl.textContent = 'Error';
          tempEl.textContent = '--';
          descEl.textContent = 'Could not load';
          extraEl.textContent = '';
        });
    }

    function initWeather() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const { latitude, longitude } = pos.coords;
          fetchWeather(latitude, longitude);
        }, err => {
          console.warn('Geolocation error:', err);
          // fallback to a fixed location, e.g. London
          fetchWeather(51.5074, -0.1278);
        });
      } else {
        // geolocation not supported, fallback
        fetchWeather(51.5074, -0.1278);
      }
    }

    initWeather();
  </script>
</body>
</html>
