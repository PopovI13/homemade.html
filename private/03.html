<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detonate</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      height: 100vh;
      user-select: none;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      z-index: 0;
      background: black;
    }

    a.back-link {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 10;
      color: #f0e68c;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.1rem;
      border: 2px solid #f0e68c;
      padding: 12px 26px;
      border-radius: 12px;
      transition: background-color 0.3s ease, color 0.3s ease;
      letter-spacing: 1px;
      user-select: none;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(6px);
    }

    a.back-link:hover {
      background-color: #f0e68c;
      color: #000;
      box-shadow: 0 0 15px #f0e68c;
    }
  </style>
</head>
<body>

<a href="cool-projects.html" class="back-link">← Back to Cool Projects</a>

<canvas id="canvas"></canvas>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  let width, height;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  window.addEventListener('resize', resize);
  resize();

  const COLORS = [
    { h: 30, s: 100, l: 55 },
    { h: 45, s: 100, l: 65 },
    { h: 15, s: 100, l: 50 },
    { h: 0,  s: 100, l: 50 },
    { h: 50, s: 80,  l: 80 },
    { h: 40, s: 70,  l: 75 },
  ];

  class Particle {
    constructor(x, y, color, size = 4) {
      this.x = x;
      this.y = y;
      this.size = size;
      this.color = color;
      this.alpha = 1;
      this.life = 60 + Math.random() * 40; // fades out in ~2–4 seconds
    }

    update() {
      this.life--;
      this.alpha = Math.max(0, this.life / 100);
    }

    draw() {
      ctx.save();
      ctx.globalAlpha = this.alpha;
      ctx.shadowColor = `hsl(${this.color.h}, ${this.color.s}%, ${this.color.l}%)`;
      ctx.shadowBlur = 10;
      ctx.fillStyle = `hsl(${this.color.h}, ${this.color.s}%, ${this.color.l}%)`;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }
  }

  let particles = [];

  function randomColor() {
    return COLORS[Math.floor(Math.random() * COLORS.length)];
  }

  function createTrail(x, y) {
    const count = 2 + Math.floor(Math.random() * 2);
    for (let i = 0; i < count; i++) {
      particles.push(new Particle(x, y, randomColor(), Math.random() * 3 + 2));
    }
  }

  function createExplosion(x, y, big = false) {
    const count = big ? 200 : 80;
    for (let i = 0; i < count; i++) {
      const angle = Math.random() * 2 * Math.PI;
      const speed = Math.random() * (big ? 6 : 3);
      const px = x + Math.cos(angle) * speed * 2;
      const py = y + Math.sin(angle) * speed * 2;
      particles.push(new Particle(px, py, randomColor(), big ? 5 : 3));
    }
  }

  let drawing = false;
  let lastMouse = { x: 0, y: 0 };

  canvas.addEventListener('mousedown', e => {
    drawing = true;
    lastMouse = { x: e.clientX, y: e.clientY };

    // Big explosion after hold
    holdTimer = setTimeout(() => {
      if (drawing) {
        createExplosion(e.clientX, e.clientY, true);
      }
    }, 2500);
  });

  canvas.addEventListener('mouseup', () => {
    drawing = false;
    clearTimeout(holdTimer);
  });

  canvas.addEventListener('mouseleave', () => {
    drawing = false;
    clearTimeout(holdTimer);
  });

  canvas.addEventListener('mousemove', e => {
    if (drawing) {
      const dx = e.clientX - lastMouse.x;
      const dy = e.clientY - lastMouse.y;
      const dist = Math.sqrt(dx * dx + dy * dy);

      if (dist > 2) {
        createTrail(e.clientX, e.clientY);
        lastMouse = { x: e.clientX, y: e.clientY };
      }
    }
  });

  let holdTimer;

  function animate() {
    ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
    ctx.fillRect(0, 0, width, height);

    for (let i = particles.length - 1; i >= 0; i--) {
      const p = particles[i];
      p.update();
      p.draw();
      if (p.life <= 0) {
        particles.splice(i, 1);
      }
    }

    requestAnimationFrame(animate);
  }

  animate();
</script>

</body>
</html>


</body>
</html>
